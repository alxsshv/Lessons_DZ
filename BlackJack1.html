<meta  charset="utf-8">
<script>
function GetRandomInt (min, max){
  return Math.floor(Math.random()*(max-min+1))+min;
}

function GetCard() {
  var cards = ['6', '7', '8', '9', '10', 'В', 'Д', 'К', 'Т'];
  return cards [GetRandomInt(0, cards.length-1)];
}

function GetNominal (arry){
  for (var i=0;i<arry.length; i++){
    if ((arry[i]=='В')||(arry[i]=='Д')||(arry[i]=='К')){
      arry[i]=10;
    } else if (arry[i]=='Т'){
      arry[i]=11;
  } else if ((arry[i]!='В')||(arry[i]!='Д')||(arry[i]!='К')||(arry[i]!='Т')) {
  arry[i] = parseInt(arry[i]);
  }
  }
  return arry;
}

function GetSum (array){
  var score = 0;
  var arr = GetNominal(array);
  for (var i=0; i<array.length;i++){
  if ((arr[i]<11)||((arr[i]=11) && (score+arr[i]<=21))) {
    score = score + arr[i];
  } else if ((arr[i]=11) && (score+arr[i]>21)){
    score++;
  }
  }
return score;
}

function GetStatus () {
  return 'Дилер: '+ dealer.join(' ') + ' Игрок: '+ player.join (' ')+ '.';
}

var dealer = [GetCard()];
var player = [GetCard(), GetCard()];

var answer = '';
do {
  alert (GetStatus());
  if (GetSum(player)== 21){
  prompt (GetStatus()+' Поздравяю! Вы победили!');
  break;
  }
  if (GetSum(player) > 21){
  prompt (GetStatus()+' Перебор! Повезет в другой раз!');
  break;
  }
  answer = prompt (GetStatus()+'Еще карту? да или нет?');
  if (answer == 'да') {
  player.push(GetCard());
} else {
  var sumDealer = GetSum (dealer);
  var sumPlayer = GetSum (player);
}


} while (answer == 'да');


</script>
